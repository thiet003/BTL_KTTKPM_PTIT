{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\BTL_KTPM\\\\f1-management-system\\\\f1-management-frontend\\\\src\\\\pages\\\\RaceResultsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Form, Button, Spinner, Alert } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { getAllSeasons } from '../services/seasonService';\nimport RaceStageList from '../components/RaceResults/RaceStageList';\nimport { getRacesBySeasonId } from '../services/raceService';\n// Trang chọn mùa giải và ch\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RaceResultsPage = () => {\n  _s();\n  const [seasons, setSeasons] = useState([]);\n  const [selectedSeason, setSelectedSeason] = useState('');\n  const [races, setRaces] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    const fetchSeasons = async () => {\n      try {\n        const data = await getAllSeasons();\n        setSeasons(data);\n        if (data.length > 0) {\n          setSelectedSeason(data[0].id); // Select first season by default\n        }\n      } catch (err) {\n        setError('Không thể tải danh sách mùa giải. Vui lòng thử lại sau.');\n        console.error('Error fetching seasons:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchSeasons();\n  }, []);\n  useEffect(() => {\n    if (selectedSeason) {\n      fetchRaces(selectedSeason);\n    }\n  }, [selectedSeason]);\n  const fetchRaces = async seasonId => {\n    setLoading(true);\n    try {\n      const data = await getRacesBySeasonId(seasonId);\n      setRaces(data);\n    } catch (err) {\n      setError('Không thể tải danh sách chặng đua. Vui lòng thử lại sau.');\n      console.error('Error fetching races:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleSeasonChange = e => {\n    setSelectedSeason(e.target.value);\n  };\n  const handleContinue = () => {\n    if (selectedSeason) {\n      fetchRaces(selectedSeason);\n    }\n  };\n  const handleRaceSelect = race => {\n    navigate(`/race-results/entry/${race.id}`, {\n      state: {\n        seasonId: selectedSeason\n      }\n    });\n  };\n  if (loading && seasons.length === 0) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"\\u0110ang t\\u1EA3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 72,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-title\",\n      children: \"C\\u1EADp nh\\u1EADt k\\u1EBFt qu\\u1EA3 ch\\u1EB7ng \\u0111ua\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 17\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mb-4\",\n      children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n        children: \"Ch\\u1ECDn m\\xF9a gi\\u1EA3i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Form, {\n        children: [/*#__PURE__*/_jsxDEV(Form.Group, {\n          className: \"mb-3\",\n          children: /*#__PURE__*/_jsxDEV(Form.Select, {\n            value: selectedSeason,\n            onChange: handleSeasonChange,\n            disabled: loading || seasons.length === 0,\n            children: seasons.length === 0 ? /*#__PURE__*/_jsxDEV(\"option\", {\n              children: \"Kh\\xF4ng c\\xF3 m\\xF9a gi\\u1EA3i n\\xE0o\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 94,\n              columnNumber: 17\n            }, this) : seasons.map(season => /*#__PURE__*/_jsxDEV(\"option\", {\n              value: season.id,\n              children: [season.name, \" (\", season.year, \")\"]\n            }, season.id, true, {\n              fileName: _jsxFileName,\n              lineNumber: 97,\n              columnNumber: 19\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 88,\n            columnNumber: 13\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 87,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          className: \"f1-primary-btn\",\n          onClick: handleContinue,\n          disabled: loading || !selectedSeason,\n          children: \"Ti\\u1EBFp t\\u1EE5c\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 105,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 7\n    }, this), loading && races.length === 0 ? /*#__PURE__*/_jsxDEV(Spinner, {\n      animation: \"border\",\n      role: \"status\",\n      children: /*#__PURE__*/_jsxDEV(\"span\", {\n        className: \"visually-hidden\",\n        children: \"\\u0110ang t\\u1EA3i danh s\\xE1ch ch\\u1EB7ng \\u0111ua...\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 118,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 117,\n      columnNumber: 9\n    }, this) : selectedSeason && races.length > 0 && /*#__PURE__*/_jsxDEV(RaceStageList, {\n      races: races,\n      onRaceSelect: handleRaceSelect\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 11\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 79,\n    columnNumber: 5\n  }, this);\n};\n_s(RaceResultsPage, \"qk8HLXvqnjIltpuRzoUFFXsGzmE=\", false, function () {\n  return [useNavigate];\n});\n_c = RaceResultsPage;\nexport default RaceResultsPage;\nvar _c;\n$RefreshReg$(_c, \"RaceResultsPage\");","map":{"version":3,"names":["React","useState","useEffect","Container","Form","Button","Spinner","Alert","useNavigate","getAllSeasons","RaceStageList","getRacesBySeasonId","jsxDEV","_jsxDEV","RaceResultsPage","_s","seasons","setSeasons","selectedSeason","setSelectedSeason","races","setRaces","loading","setLoading","error","setError","navigate","fetchSeasons","data","length","id","err","console","fetchRaces","seasonId","handleSeasonChange","e","target","value","handleContinue","handleRaceSelect","race","state","className","children","animation","role","fileName","_jsxFileName","lineNumber","columnNumber","variant","Group","Select","onChange","disabled","map","season","name","year","onClick","onRaceSelect","_c","$RefreshReg$"],"sources":["C:/Users/ADMIN/Desktop/BTL_KTPM/f1-management-system/f1-management-frontend/src/pages/RaceResultsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Form, Button, Spinner, Alert } from 'react-bootstrap';\nimport { useNavigate } from 'react-router-dom';\nimport { getAllSeasons } from '../services/seasonService';\nimport RaceStageList from '../components/RaceResults/RaceStageList';\nimport { getRacesBySeasonId } from '../services/raceService';\n// Trang chọn mùa giải và ch\nconst RaceResultsPage = () => {\n  const [seasons, setSeasons] = useState([]);\n  const [selectedSeason, setSelectedSeason] = useState('');\n  const [races, setRaces] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const navigate = useNavigate();\n\n  useEffect(() => {\n    const fetchSeasons = async () => {\n      try {\n        const data = await getAllSeasons();\n        setSeasons(data);\n        if (data.length > 0) {\n          setSelectedSeason(data[0].id); // Select first season by default\n        }\n      } catch (err) {\n        setError('Không thể tải danh sách mùa giải. Vui lòng thử lại sau.');\n        console.error('Error fetching seasons:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    fetchSeasons();\n  }, []);\n\n  useEffect(() => {\n    if (selectedSeason) {\n      fetchRaces(selectedSeason);\n    }\n  }, [selectedSeason]);\n\n  const fetchRaces = async (seasonId) => {\n    setLoading(true);\n    try {\n      const data = await getRacesBySeasonId(seasonId);\n      setRaces(data);\n    } catch (err) {\n      setError('Không thể tải danh sách chặng đua. Vui lòng thử lại sau.');\n      console.error('Error fetching races:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleSeasonChange = (e) => {\n    setSelectedSeason(e.target.value);\n  };\n\n  const handleContinue = () => {\n    if (selectedSeason) {\n      fetchRaces(selectedSeason);\n    }\n  };\n\n  const handleRaceSelect = (race) => {\n    navigate(`/race-results/entry/${race.id}`, { state: { seasonId: selectedSeason } });\n  };\n\n  if (loading && seasons.length === 0) {\n    return (\n      <Container className=\"d-flex justify-content-center mt-5\">\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"visually-hidden\">Đang tải...</span>\n        </Spinner>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <h2 className=\"page-title\">Cập nhật kết quả chặng đua</h2>\n      \n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      \n      <div className=\"mb-4\">\n        <h4>Chọn mùa giải</h4>\n        <Form>\n          <Form.Group className=\"mb-3\">\n            <Form.Select \n              value={selectedSeason} \n              onChange={handleSeasonChange}\n              disabled={loading || seasons.length === 0}\n            >\n              {seasons.length === 0 ? (\n                <option>Không có mùa giải nào</option>\n              ) : (\n                seasons.map(season => (\n                  <option key={season.id} value={season.id}>\n                    {season.name} ({season.year})\n                  </option>\n                ))\n              )}\n            </Form.Select>\n          </Form.Group>\n          \n          <Button \n            variant=\"primary\" \n            className=\"f1-primary-btn\"\n            onClick={handleContinue}\n            disabled={loading || !selectedSeason}\n          >\n            Tiếp tục\n          </Button>\n        </Form>\n      </div>\n      \n      {loading && races.length === 0 ? (\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"visually-hidden\">Đang tải danh sách chặng đua...</span>\n        </Spinner>\n      ) : (\n        selectedSeason && races.length > 0 && (\n          <RaceStageList races={races} onRaceSelect={handleRaceSelect} />\n        )\n      )}\n    </Container>\n  );\n};\n\nexport default RaceResultsPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}