{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\BTL_KTPM\\\\f1-management-system\\\\f1-management-frontend\\\\src\\\\pages\\\\RaceResultsEntryPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert, Spinner, Card, Modal } from 'react-bootstrap';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { getRaceById } from '../services/raceService';\nimport { getRaceEntriesByRaceStageId, getRaceResultsByRaceStageId, updateRaceResults } from '../services/raceResultService';\nimport RaceResultsForm from '../components/RaceResults/RaceResultsForm';\nimport { v4 as uuidv4 } from 'uuid';\n// Trang cập nhật kết quả chặng đua\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst RaceResultsEntryPage = () => {\n  _s();\n  var _location$state;\n  const {\n    id\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const seasonId = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.seasonId;\n  const [race, setRace] = useState(null);\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [results, setResults] = useState([]);\n  useEffect(() => {\n    if (!seasonId) {\n      setError('Không tìm thấy thông tin mùa giải. Vui lòng quay lại trang trước.');\n      setLoading(false);\n      return;\n    }\n    const fetchData = async () => {\n      try {\n        // Lấy thông tin chặng đua\n        const raceData = await getRaceById(id);\n        setRace(raceData);\n\n        // Lấy thông tin đăng ký chặng đua\n        const entriesData = await getRaceEntriesByRaceStageId(id);\n        setEntries(entriesData);\n\n        // Lấy kết quả đua nếu có\n        try {\n          const existingResults = await getRaceResultsByRaceStageId(id);\n          if (existingResults && existingResults.length > 0) {\n            // Chuyển đổi định dạng mới về định dạng cũ để tương thích với UI\n            const formattedResults = existingResults.map(result => {\n              var _result$raceStage, _result$driver, _result$team, _result$driver2, _result$team2, _result$season;\n              return {\n                id: result.id,\n                raceStageId: ((_result$raceStage = result.raceStage) === null || _result$raceStage === void 0 ? void 0 : _result$raceStage.id) || id,\n                driverId: (_result$driver = result.driver) === null || _result$driver === void 0 ? void 0 : _result$driver.id,\n                teamId: (_result$team = result.team) === null || _result$team === void 0 ? void 0 : _result$team.id,\n                driverName: (_result$driver2 = result.driver) === null || _result$driver2 === void 0 ? void 0 : _result$driver2.fullName,\n                teamName: (_result$team2 = result.team) === null || _result$team2 === void 0 ? void 0 : _result$team2.name,\n                seasonId: ((_result$season = result.season) === null || _result$season === void 0 ? void 0 : _result$season.id) || seasonId,\n                gridPosition: result.gridPosition,\n                finishPosition: result.finishPosition,\n                points: result.points,\n                status: result.status,\n                finishTimeOrGap: result.finishTimeOrGap,\n                lapsCompleted: result.lapsCompleted\n              };\n            });\n            setResults(formattedResults);\n          } else {\n            // Khởi tạo kết quả với giá trị mặc định nếu không có kết quả\n            initializeDefaultResults(entriesData, raceData);\n          }\n        } catch (resultError) {\n          console.log('Không tìm thấy kết quả, khởi tạo giá trị mặc định');\n          // Khởi tạo kết quả với giá trị mặc định\n          initializeDefaultResults(entriesData, raceData);\n        }\n      } catch (err) {\n        setError('Không thể tải thông tin chặng đua. Vui lòng thử lại sau.');\n        console.error('Error fetching data:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    const initializeDefaultResults = (entriesData, raceData) => {\n      const initialResults = entriesData.map(entry => ({\n        id: uuidv4(),\n        raceStageId: id,\n        driverId: entry.driverId,\n        teamId: entry.teamId,\n        driverName: entry.driverName || null,\n        teamName: entry.teamName || null,\n        gridPosition: null,\n        finishPosition: null,\n        points: 0,\n        status: 'PENDING',\n        // Default status\n        finishTimeOrGap: '',\n        lapsCompleted: raceData.laps // Default to full race distance\n      }));\n      setResults(initialResults);\n    };\n    fetchData();\n  }, [id, seasonId]);\n  const handleResultChange = (driverId, field, value) => {\n    setResults(prevResults => {\n      const updatedResults = prevResults.map(result => result.driverId === driverId ? {\n        ...result,\n        [field]: value\n      } : result);\n\n      // Nếu đang thay đổi trạng thái thành FINISHED, tự động đặt vị trí về đích\n      if (field === 'status' && value === 'FINISHED') {\n        // Đếm số tay đua đã hoàn thành\n        const finishedCount = updatedResults.filter(r => r.status === 'FINISHED').length;\n\n        // Cập nhật vị trí về đích cho tay đua vừa hoàn thành\n        return updatedResults.map(result => result.driverId === driverId ? {\n          ...result,\n          finishPosition: finishedCount\n        } : result);\n      }\n      return updatedResults;\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSaveSuccess(false);\n\n    // Kiểm tra định dạng thời gian\n    const isValidTimeFormat = timeString => {\n      // Kiểm tra định dạng hh:mm:ss hoặc mm:ss\n      const timePattern = /^(?:(\\d+):)?(\\d{1,2}):(\\d{1,2})(?:\\.(\\d{1,3}))?$/;\n      return timePattern.test(timeString);\n    };\n\n    // Kiểm tra tất cả tay đua FINISHED phải có thời gian hoàn thành và đúng định dạng\n    const finishedDriversWithIssues = results.filter(result => result.status === 'FINISHED' && (!result.finishTimeOrGap || result.finishTimeOrGap.trim() === '' || !isValidTimeFormat(result.finishTimeOrGap)));\n    if (finishedDriversWithIssues.length > 0) {\n      setError('Vui lòng nhập thời gian hoàn thành cho tất cả các tay đua có trạng thái \"Hoàn thành\" theo định dạng hh:mm:ss hoặc mm:ss.');\n      setLoading(false);\n      return;\n    }\n\n    // Kiểm tra số vòng hoàn thành phải hợp lệ\n    const driversWithInvalidLaps = results.filter(result => {\n      const lapsCompleted = parseInt(result.lapsCompleted, 10);\n      const totalLaps = parseInt(race.laps, 10);\n      if (result.status === 'PENDING') {\n        // Tay đua chưa xuất phát phải có số vòng là 0\n        return lapsCompleted !== 0;\n      } else if (result.status === 'FINISHED') {\n        // Tay đua hoàn thành phải chạy đủ số vòng\n        return lapsCompleted !== totalLaps;\n      } else {\n        // Tay đua không hoàn thành không được chạy đủ số vòng\n        return lapsCompleted >= totalLaps;\n      }\n    });\n    if (driversWithInvalidLaps.length > 0) {\n      setError('Số vòng hoàn thành không hợp lệ. Tay đua chưa xuất phát phải có số vòng là 0. Tay đua hoàn thành phải chạy đủ số vòng. Tay đua không hoàn thành không được chạy đủ số vòng.');\n      setLoading(false);\n      return;\n    }\n    try {\n      // Process results before sending to API\n      const processedResults = results.map(result => {\n        // Tìm entry tương ứng để lấy thông tin tên nếu cần\n        const entry = entries.find(e => e.driverId === result.driverId);\n        return {\n          ...result,\n          driverName: result.driverName || (entry ? entry.driverName : null),\n          teamName: result.teamName || (entry ? entry.teamName : null),\n          gridPosition: result.gridPosition ? parseInt(result.gridPosition, 10) : null,\n          finishPosition: result.status === 'FINISHED' ? parseInt(result.finishPosition, 10) : null,\n          lapsCompleted: parseInt(result.lapsCompleted, 10),\n          finishTimeOrGap: result.status === 'FINISHED' ? result.finishTimeOrGap : 'N/A'\n        };\n      });\n      await updateRaceResults(id, seasonId, processedResults);\n      setSaveSuccess(true);\n    } catch (err) {\n      setError('Có lỗi xảy ra khi lưu kết quả. Vui lòng thử lại sau.');\n      console.error('Error updating race results:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleConfirm = () => {\n    navigate('/race-results');\n  };\n  if (loading && !race) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"\\u0110ang t\\u1EA3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 211,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 210,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 209,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !race) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 220,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: () => navigate('/race-results'),\n        children: \"Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-title\",\n      children: \"C\\u1EADp nh\\u1EADt k\\u1EBFt qu\\u1EA3 ch\\u1EB7ng \\u0111ua\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 230,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: saveSuccess,\n      onHide: handleConfirm,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Th\\xF4ng b\\xE1o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 234,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-check-circle text-success\",\n            style: {\n              fontSize: '4rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 239,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mt-3\",\n            children: \"Th\\xE0nh c\\xF4ng!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\u1EBFt qu\\u1EA3 ch\\u1EB7ng \\u0111ua \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c c\\u1EADp nh\\u1EADt.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 238,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleConfirm,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 245,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 244,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 233,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 251,\n      columnNumber: 17\n    }, this), race && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: race.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 256,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"M\\xE3 ch\\u1EB7ng \\u0111ua:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 15\n          }, this), \" \", race.id, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 258,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"S\\u1ED1 v\\xF2ng \\u0111ua:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 15\n          }, this), \" \", race.laps, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 259,\n            columnNumber: 56\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Th\\u1EDDi gian di\\u1EC5n ra:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 15\n          }, this), \" \", new Date(race.raceDate).toLocaleDateString('vi-VN'), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 260,\n            columnNumber: 104\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0110\\u1ECBa \\u0111i\\u1EC3m:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 261,\n            columnNumber: 15\n          }, this), \" \", race.circuit ? `${race.circuit.name}, ${race.circuit.country}` : 'N/A']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 257,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 255,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 254,\n      columnNumber: 9\n    }, this), entries.length > 0 ? /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(RaceResultsForm, {\n        entries: entries,\n        results: results,\n        onResultChange: handleResultChange,\n        totalLaps: (race === null || race === void 0 ? void 0 : race.laps) || 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 269,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        className: \"f1-primary-btn mt-3\",\n        disabled: loading,\n        children: loading ? 'Đang lưu...' : 'Lưu kết quả'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 276,\n        columnNumber: 11\n      }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: () => navigate('/race-results'),\n        className: \"mt-3\",\n        children: \"H\\u1EE7y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 284,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 268,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"info\",\n      children: \"Kh\\xF4ng c\\xF3 tay \\u0111ua n\\xE0o \\u0111\\u0103ng k\\xFD tham gia ch\\u1EB7ng \\u0111ua n\\xE0y.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 229,\n    columnNumber: 5\n  }, this);\n};\n_s(RaceResultsEntryPage, \"DGMkfTCUNFrZBvMGUKS3+TN8tF0=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = RaceResultsEntryPage;\nexport default RaceResultsEntryPage;\nvar _c;\n$RefreshReg$(_c, \"RaceResultsEntryPage\");","map":{"version":3,"names":["React","useState","useEffect","Container","Form","Button","Alert","Spinner","Card","Modal","useParams","useLocation","useNavigate","getRaceById","getRaceEntriesByRaceStageId","getRaceResultsByRaceStageId","updateRaceResults","RaceResultsForm","v4","uuidv4","jsxDEV","_jsxDEV","RaceResultsEntryPage","_s","_location$state","id","location","navigate","seasonId","state","race","setRace","entries","setEntries","loading","setLoading","error","setError","saveSuccess","setSaveSuccess","results","setResults","fetchData","raceData","entriesData","existingResults","length","formattedResults","map","result","_result$raceStage","_result$driver","_result$team","_result$driver2","_result$team2","_result$season","raceStageId","raceStage","driverId","driver","teamId","team","driverName","fullName","teamName","name","season","gridPosition","finishPosition","points","status","finishTimeOrGap","lapsCompleted","initializeDefaultResults","resultError","console","log","err","initialResults","entry","laps","handleResultChange","field","value","prevResults","updatedResults","finishedCount","filter","r","handleSubmit","e","preventDefault","isValidTimeFormat","timeString","timePattern","test","finishedDriversWithIssues","trim","driversWithInvalidLaps","parseInt","totalLaps","processedResults","find","handleConfirm","className","children","animation","role","fileName","_jsxFileName","lineNumber","columnNumber","variant","onClick","show","onHide","centered","Header","closeButton","Title","Body","style","fontSize","Footer","Text","Date","raceDate","toLocaleDateString","circuit","country","onSubmit","onResultChange","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ADMIN/Desktop/BTL_KTPM/f1-management-system/f1-management-frontend/src/pages/RaceResultsEntryPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert, Spinner, Card, Modal } from 'react-bootstrap';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { getRaceById } from '../services/raceService';\nimport { getRaceEntriesByRaceStageId, getRaceResultsByRaceStageId, updateRaceResults } from '../services/raceResultService';\nimport RaceResultsForm from '../components/RaceResults/RaceResultsForm';\nimport { v4 as uuidv4 } from 'uuid';\n// Trang cập nhật kết quả chặng đua\nconst RaceResultsEntryPage = () => {\n  const { id } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const seasonId = location.state?.seasonId;\n  \n  const [race, setRace] = useState(null);\n  const [entries, setEntries] = useState([]);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [results, setResults] = useState([]);\n\n  useEffect(() => {\n    if (!seasonId) {\n      setError('Không tìm thấy thông tin mùa giải. Vui lòng quay lại trang trước.');\n      setLoading(false);\n      return;\n    }\n\n    const fetchData = async () => {\n      try {\n        // Lấy thông tin chặng đua\n        const raceData = await getRaceById(id);\n        setRace(raceData);\n        \n        // Lấy thông tin đăng ký chặng đua\n        const entriesData = await getRaceEntriesByRaceStageId(id);\n        setEntries(entriesData);\n        \n        // Lấy kết quả đua nếu có\n        try {\n          const existingResults = await getRaceResultsByRaceStageId(id);\n          if (existingResults && existingResults.length > 0) {\n            // Chuyển đổi định dạng mới về định dạng cũ để tương thích với UI\n            const formattedResults = existingResults.map(result => ({\n              id: result.id,\n              raceStageId: result.raceStage?.id || id,\n              driverId: result.driver?.id,\n              teamId: result.team?.id,\n              driverName: result.driver?.fullName,\n              teamName: result.team?.name,\n              seasonId: result.season?.id || seasonId,\n              gridPosition: result.gridPosition,\n              finishPosition: result.finishPosition,\n              points: result.points,\n              status: result.status,\n              finishTimeOrGap: result.finishTimeOrGap,\n              lapsCompleted: result.lapsCompleted\n            }));\n            \n            setResults(formattedResults);\n          } else {\n            // Khởi tạo kết quả với giá trị mặc định nếu không có kết quả\n            initializeDefaultResults(entriesData, raceData);\n          }\n        } catch (resultError) {\n          console.log('Không tìm thấy kết quả, khởi tạo giá trị mặc định');\n          // Khởi tạo kết quả với giá trị mặc định\n          initializeDefaultResults(entriesData, raceData);\n        }\n      } catch (err) {\n        setError('Không thể tải thông tin chặng đua. Vui lòng thử lại sau.');\n        console.error('Error fetching data:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n\n    const initializeDefaultResults = (entriesData, raceData) => {\n      const initialResults = entriesData.map(entry => ({\n        id: uuidv4(),\n        raceStageId: id,\n        driverId: entry.driverId,\n        teamId: entry.teamId,\n        driverName: entry.driverName || null,\n        teamName: entry.teamName || null,\n        gridPosition: null,\n        finishPosition: null,\n        points: 0,\n        status: 'PENDING', // Default status\n        finishTimeOrGap: '',\n        lapsCompleted: raceData.laps // Default to full race distance\n      }));\n      \n      setResults(initialResults);\n    };\n\n    fetchData();\n  }, [id, seasonId]);\n\n  const handleResultChange = (driverId, field, value) => {\n    setResults(prevResults => {\n      const updatedResults = prevResults.map(result => \n        result.driverId === driverId \n          ? { ...result, [field]: value } \n          : result\n      );\n      \n      // Nếu đang thay đổi trạng thái thành FINISHED, tự động đặt vị trí về đích\n      if (field === 'status' && value === 'FINISHED') {\n        // Đếm số tay đua đã hoàn thành\n        const finishedCount = updatedResults.filter(r => r.status === 'FINISHED').length;\n        \n        // Cập nhật vị trí về đích cho tay đua vừa hoàn thành\n        return updatedResults.map(result => \n          result.driverId === driverId \n            ? { ...result, finishPosition: finishedCount } \n            : result\n        );\n      }\n      \n      return updatedResults;\n    });\n  };\n\n  const handleSubmit = async (e) => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSaveSuccess(false);\n\n    // Kiểm tra định dạng thời gian\n    const isValidTimeFormat = (timeString) => {\n      // Kiểm tra định dạng hh:mm:ss hoặc mm:ss\n      const timePattern = /^(?:(\\d+):)?(\\d{1,2}):(\\d{1,2})(?:\\.(\\d{1,3}))?$/;\n      return timePattern.test(timeString);\n    };\n\n    // Kiểm tra tất cả tay đua FINISHED phải có thời gian hoàn thành và đúng định dạng\n    const finishedDriversWithIssues = results.filter(\n      result => result.status === 'FINISHED' && (\n        !result.finishTimeOrGap || \n        result.finishTimeOrGap.trim() === '' || \n        !isValidTimeFormat(result.finishTimeOrGap)\n      )\n    );\n\n    if (finishedDriversWithIssues.length > 0) {\n      setError('Vui lòng nhập thời gian hoàn thành cho tất cả các tay đua có trạng thái \"Hoàn thành\" theo định dạng hh:mm:ss hoặc mm:ss.');\n      setLoading(false);\n      return;\n    }\n\n    // Kiểm tra số vòng hoàn thành phải hợp lệ\n    const driversWithInvalidLaps = results.filter(result => {\n      const lapsCompleted = parseInt(result.lapsCompleted, 10);\n      const totalLaps = parseInt(race.laps, 10);\n      \n      if (result.status === 'PENDING') {\n        // Tay đua chưa xuất phát phải có số vòng là 0\n        return lapsCompleted !== 0;\n      } else if (result.status === 'FINISHED') {\n        // Tay đua hoàn thành phải chạy đủ số vòng\n        return lapsCompleted !== totalLaps;\n      } else {\n        // Tay đua không hoàn thành không được chạy đủ số vòng\n        return lapsCompleted >= totalLaps;\n      }\n    });\n\n    if (driversWithInvalidLaps.length > 0) {\n      setError('Số vòng hoàn thành không hợp lệ. Tay đua chưa xuất phát phải có số vòng là 0. Tay đua hoàn thành phải chạy đủ số vòng. Tay đua không hoàn thành không được chạy đủ số vòng.');\n      setLoading(false);\n      return;\n    }\n\n    try {\n      // Process results before sending to API\n      const processedResults = results.map(result => {\n        // Tìm entry tương ứng để lấy thông tin tên nếu cần\n        const entry = entries.find(e => e.driverId === result.driverId);\n        \n        return {\n          ...result,\n          driverName: result.driverName || (entry ? entry.driverName : null),\n          teamName: result.teamName || (entry ? entry.teamName : null),\n          gridPosition: result.gridPosition ? parseInt(result.gridPosition, 10) : null,\n          finishPosition: result.status === 'FINISHED' ? parseInt(result.finishPosition, 10) : null,\n          lapsCompleted: parseInt(result.lapsCompleted, 10),\n          finishTimeOrGap: result.status === 'FINISHED' ? result.finishTimeOrGap : 'N/A'\n        };\n      });\n\n      await updateRaceResults(id, seasonId, processedResults);\n      setSaveSuccess(true);\n    } catch (err) {\n      setError('Có lỗi xảy ra khi lưu kết quả. Vui lòng thử lại sau.');\n      console.error('Error updating race results:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n\n  const handleConfirm = () => {\n    navigate('/race-results');\n  };\n\n  if (loading && !race) {\n    return (\n      <Container className=\"d-flex justify-content-center mt-5\">\n        <Spinner animation=\"border\" role=\"status\">\n          <span className=\"visually-hidden\">Đang tải...</span>\n        </Spinner>\n      </Container>\n    );\n  }\n\n  if (error && !race) {\n    return (\n      <Container>\n        <Alert variant=\"danger\">{error}</Alert>\n        <Button variant=\"secondary\" onClick={() => navigate('/race-results')}>\n          Quay lại\n        </Button>\n      </Container>\n    );\n  }\n\n  return (\n    <Container>\n      <h2 className=\"page-title\">Cập nhật kết quả chặng đua</h2>\n      \n      {/* Modal xác nhận cập nhật thành công */}\n      <Modal show={saveSuccess} onHide={handleConfirm} centered>\n        <Modal.Header closeButton>\n          <Modal.Title>Thông báo</Modal.Title>\n        </Modal.Header>\n        <Modal.Body>\n          <div className=\"text-center\">\n            <i className=\"bi bi-check-circle text-success\" style={{ fontSize: '4rem' }}></i>\n            <h4 className=\"mt-3\">Thành công!</h4>\n            <p>Kết quả chặng đua đã được cập nhật.</p>\n          </div>\n        </Modal.Body>\n        <Modal.Footer>\n          <Button variant=\"primary\" onClick={handleConfirm}>\n            OK\n          </Button>\n        </Modal.Footer>\n      </Modal>\n      \n      {error && <Alert variant=\"danger\">{error}</Alert>}\n      \n      {race && (\n        <Card className=\"mb-4\">\n          <Card.Body>\n            <Card.Title>{race.name}</Card.Title>\n            <Card.Text>\n              <strong>Mã chặng đua:</strong> {race.id}<br />\n              <strong>Số vòng đua:</strong> {race.laps}<br />\n              <strong>Thời gian diễn ra:</strong> {new Date(race.raceDate).toLocaleDateString('vi-VN')}<br />\n              <strong>Địa điểm:</strong> {race.circuit ? `${race.circuit.name}, ${race.circuit.country}` : 'N/A'}\n            </Card.Text>\n          </Card.Body>\n        </Card>\n      )}\n      \n      {entries.length > 0 ? (\n        <Form onSubmit={handleSubmit}>\n          <RaceResultsForm \n            entries={entries} \n            results={results} \n            onResultChange={handleResultChange}\n            totalLaps={race?.laps || 0}\n          />\n          \n          <Button \n            variant=\"primary\" \n            type=\"submit\" \n            className=\"f1-primary-btn mt-3\"\n            disabled={loading}\n          >\n            {loading ? 'Đang lưu...' : 'Lưu kết quả'}\n          </Button>{' '}\n          <Button \n            variant=\"secondary\" \n            onClick={() => navigate('/race-results')}\n            className=\"mt-3\"\n          >\n            Hủy\n          </Button>\n        </Form>\n      ) : (\n        <Alert variant=\"info\">\n          Không có tay đua nào đăng ký tham gia chặng đua này.\n        </Alert>\n      )}\n    </Container>\n  );\n};\n\nexport default RaceResultsEntryPage;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}