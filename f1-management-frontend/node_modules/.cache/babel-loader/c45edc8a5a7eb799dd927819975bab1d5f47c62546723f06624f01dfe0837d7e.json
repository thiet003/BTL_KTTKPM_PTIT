{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\ADMIN\\\\Desktop\\\\KTPM\\\\BTL_KTTKPM_PTIT\\\\f1-management-frontend\\\\src\\\\pages\\\\UpdateRaceResultsPage.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport { Container, Form, Button, Alert, Spinner, Card, Modal } from 'react-bootstrap';\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\nimport { getRaceById } from '../services/raceService';\nimport { getRaceResultsByRaceStageId, updateRaceResults } from '../services/raceResultService';\nimport RaceResultsForm from '../components/RaceResults/RaceResultsForm';\nimport { v4 as uuidv4 } from 'uuid';\n// Trang cập nhật kết quả chặng đua\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst UpdateRaceResultsPage = () => {\n  _s();\n  var _location$state;\n  const {\n    id\n  } = useParams();\n  const location = useLocation();\n  const navigate = useNavigate();\n  const seasonId = (_location$state = location.state) === null || _location$state === void 0 ? void 0 : _location$state.seasonId;\n  const [race, setRace] = useState(null);\n  const [loading, setLoading] = useState(true);\n  const [error, setError] = useState(null);\n  const [saveSuccess, setSaveSuccess] = useState(false);\n  const [results, setResults] = useState([]);\n  useEffect(() => {\n    if (!seasonId) {\n      setError('Không tìm thấy thông tin mùa giải. Vui lòng quay lại trang trước.');\n      setLoading(false);\n      return;\n    }\n    const fetchData = async () => {\n      try {\n        // Lấy thông tin chặng đua\n        const raceData = await getRaceById(id);\n        setRace(raceData);\n\n        // Lấy kết quả đua nếu có\n        try {\n          const existingResults = await getRaceResultsByRaceStageId(id);\n          if (existingResults && existingResults.length > 0) {\n            // Chuyển đổi định dạng mới về định dạng cũ để tương thích với UI\n            const formattedResults = existingResults.map(result => {\n              var _result$raceStage, _result$driverTeamAss, _result$driverTeamAss2, _result$driverTeamAss3, _result$driverTeamAss4, _result$driverTeamAss5, _result$driverTeamAss6, _result$driverTeamAss7, _result$driverTeamAss8, _result$season;\n              return {\n                id: result.id,\n                raceStageId: ((_result$raceStage = result.raceStage) === null || _result$raceStage === void 0 ? void 0 : _result$raceStage.id) || id,\n                driverId: (_result$driverTeamAss = result.driverTeamAssignment) === null || _result$driverTeamAss === void 0 ? void 0 : (_result$driverTeamAss2 = _result$driverTeamAss.driver) === null || _result$driverTeamAss2 === void 0 ? void 0 : _result$driverTeamAss2.id,\n                teamId: (_result$driverTeamAss3 = result.driverTeamAssignment) === null || _result$driverTeamAss3 === void 0 ? void 0 : (_result$driverTeamAss4 = _result$driverTeamAss3.team) === null || _result$driverTeamAss4 === void 0 ? void 0 : _result$driverTeamAss4.id,\n                driverName: (_result$driverTeamAss5 = result.driverTeamAssignment) === null || _result$driverTeamAss5 === void 0 ? void 0 : (_result$driverTeamAss6 = _result$driverTeamAss5.driver) === null || _result$driverTeamAss6 === void 0 ? void 0 : _result$driverTeamAss6.fullName,\n                teamName: (_result$driverTeamAss7 = result.driverTeamAssignment) === null || _result$driverTeamAss7 === void 0 ? void 0 : (_result$driverTeamAss8 = _result$driverTeamAss7.team) === null || _result$driverTeamAss8 === void 0 ? void 0 : _result$driverTeamAss8.name,\n                seasonId: ((_result$season = result.season) === null || _result$season === void 0 ? void 0 : _result$season.id) || seasonId,\n                gridPosition: result.gridPosition,\n                finishPosition: result.finishPosition,\n                points: result.points,\n                status: result.status,\n                finishTimeOrGap: result.finishTimeOrGap,\n                lapsCompleted: result.lapsCompleted\n              };\n            });\n            setResults(formattedResults);\n          } else {\n            // Khởi tạo mảng rỗng nếu không có kết quả\n            setError('Không có kết quả đua cho chặng này. Vui lòng thêm kết quả đua trước.');\n          }\n        } catch (resultError) {\n          console.log('Không tìm thấy kết quả:', resultError);\n          setError('Không có kết quả đua cho chặng này. Vui lòng thêm kết quả đua trước.');\n        }\n      } catch (err) {\n        setError('Không thể tải thông tin chặng đua. Vui lòng thử lại sau.');\n        console.error('Error fetching data:', err);\n      } finally {\n        setLoading(false);\n      }\n    };\n    fetchData();\n  }, [id, seasonId]);\n  const handleResultChange = (driverId, field, value) => {\n    setResults(prevResults => {\n      const updatedResults = prevResults.map(result => result.driverId === driverId ? {\n        ...result,\n        [field]: value\n      } : result);\n\n      // Nếu đang thay đổi trạng thái thành FINISHED, tự động đặt vị trí về đích\n      if (field === 'status' && value === 'FINISHED') {\n        // Đếm số tay đua đã hoàn thành\n        const finishedCount = updatedResults.filter(r => r.status === 'FINISHED').length;\n\n        // Cập nhật vị trí về đích cho tay đua vừa hoàn thành\n        return updatedResults.map(result => result.driverId === driverId ? {\n          ...result,\n          finishPosition: finishedCount\n        } : result);\n      }\n      return updatedResults;\n    });\n  };\n  const handleSubmit = async e => {\n    e.preventDefault();\n    setLoading(true);\n    setError(null);\n    setSaveSuccess(false);\n\n    // Kiểm tra định dạng thời gian\n    const isValidTimeFormat = timeString => {\n      // Kiểm tra định dạng hh:mm:ss hoặc mm:ss\n      const timePattern = /^(?:(\\d+):)?(\\d{1,2}):(\\d{1,2})(?:\\.(\\d{1,3}))?$/;\n      return timePattern.test(timeString);\n    };\n\n    // Kiểm tra tất cả tay đua FINISHED phải có thời gian hoàn thành và đúng định dạng\n    const finishedDriversWithIssues = results.filter(result => result.status === 'FINISHED' && (!result.finishTimeOrGap || result.finishTimeOrGap.trim() === '' || !isValidTimeFormat(result.finishTimeOrGap)));\n    if (finishedDriversWithIssues.length > 0) {\n      setError('Vui lòng nhập thời gian hoàn thành cho tất cả các tay đua có trạng thái \"Hoàn thành\" theo định dạng hh:mm:ss hoặc mm:ss.');\n      setLoading(false);\n      return;\n    }\n\n    // Kiểm tra số vòng hoàn thành phải hợp lệ\n    const driversWithInvalidLaps = results.filter(result => {\n      const lapsCompleted = parseInt(result.lapsCompleted, 10);\n      const totalLaps = parseInt(race.laps, 10);\n      if (result.status === 'PENDING') {\n        // Tay đua chưa xuất phát phải có số vòng là 0\n        return lapsCompleted !== 0;\n      } else if (result.status === 'FINISHED') {\n        // Tay đua hoàn thành phải chạy đủ số vòng\n        return lapsCompleted !== totalLaps;\n      } else {\n        // Tay đua không hoàn thành không được chạy đủ số vòng\n        return lapsCompleted >= totalLaps;\n      }\n    });\n    if (driversWithInvalidLaps.length > 0) {\n      setError('Số vòng hoàn thành không hợp lệ. Tay đua chưa xuất phát phải có số vòng là 0. Tay đua hoàn thành phải chạy đủ số vòng. Tay đua không hoàn thành không được chạy đủ số vòng.');\n      setLoading(false);\n      return;\n    }\n    try {\n      // Process results before sending to API\n      const processedResults = results.map(result => ({\n        ...result,\n        gridPosition: result.gridPosition ? parseInt(result.gridPosition, 10) : null,\n        finishPosition: result.status === 'FINISHED' ? parseInt(result.finishPosition, 10) : null,\n        lapsCompleted: parseInt(result.lapsCompleted, 10),\n        finishTimeOrGap: result.status === 'FINISHED' ? result.finishTimeOrGap : 'N/A'\n      }));\n      await updateRaceResults(id, seasonId, processedResults);\n      setSaveSuccess(true);\n    } catch (err) {\n      setError('Có lỗi xảy ra khi lưu kết quả. Vui lòng thử lại sau.');\n      console.error('Error updating race results:', err);\n    } finally {\n      setLoading(false);\n    }\n  };\n  const handleConfirm = () => {\n    navigate('/race-results');\n  };\n  if (loading && !race) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      className: \"d-flex justify-content-center mt-5\",\n      children: /*#__PURE__*/_jsxDEV(Spinner, {\n        animation: \"border\",\n        role: \"status\",\n        children: /*#__PURE__*/_jsxDEV(\"span\", {\n          className: \"visually-hidden\",\n          children: \"\\u0110ang t\\u1EA3i...\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 179,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 178,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 177,\n      columnNumber: 7\n    }, this);\n  }\n  if (error && !race) {\n    return /*#__PURE__*/_jsxDEV(Container, {\n      children: [/*#__PURE__*/_jsxDEV(Alert, {\n        variant: \"danger\",\n        children: error\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 188,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: () => navigate('/race-results'),\n        children: \"Quay l\\u1EA1i\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 189,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 187,\n      columnNumber: 7\n    }, this);\n  }\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      className: \"page-title\",\n      children: \"C\\u1EADp nh\\u1EADt k\\u1EBFt qu\\u1EA3 ch\\u1EB7ng \\u0111ua\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 198,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Modal, {\n      show: saveSuccess,\n      onHide: handleConfirm,\n      centered: true,\n      children: [/*#__PURE__*/_jsxDEV(Modal.Header, {\n        closeButton: true,\n        children: /*#__PURE__*/_jsxDEV(Modal.Title, {\n          children: \"Th\\xF4ng b\\xE1o\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 203,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 202,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Body, {\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"text-center\",\n          children: [/*#__PURE__*/_jsxDEV(\"i\", {\n            className: \"bi bi-check-circle text-success\",\n            style: {\n              fontSize: '4rem'\n            }\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 207,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"h4\", {\n            className: \"mt-3\",\n            children: \"Th\\xE0nh c\\xF4ng!\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 208,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n            children: \"K\\u1EBFt qu\\u1EA3 ch\\u1EB7ng \\u0111ua \\u0111\\xE3 \\u0111\\u01B0\\u1EE3c c\\u1EADp nh\\u1EADt.\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 209,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 206,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 205,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(Modal.Footer, {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          variant: \"primary\",\n          onClick: handleConfirm,\n          children: \"OK\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 213,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 212,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 201,\n      columnNumber: 7\n    }, this), error && /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"danger\",\n      children: error\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 219,\n      columnNumber: 17\n    }, this), race && /*#__PURE__*/_jsxDEV(Card, {\n      className: \"mb-4\",\n      children: /*#__PURE__*/_jsxDEV(Card.Body, {\n        children: [/*#__PURE__*/_jsxDEV(Card.Title, {\n          children: race.name\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Card.Text, {\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"M\\xE3 ch\\u1EB7ng \\u0111ua:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 15\n          }, this), \" \", race.id, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 226,\n            columnNumber: 55\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"S\\u1ED1 v\\xF2ng \\u0111ua:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 15\n          }, this), \" \", race.laps, /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 227,\n            columnNumber: 56\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"Th\\u1EDDi gian di\\u1EC5n ra:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 15\n          }, this), \" \", new Date(race.raceDate).toLocaleDateString('vi-VN'), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 228,\n            columnNumber: 104\n          }, this), /*#__PURE__*/_jsxDEV(\"strong\", {\n            children: \"\\u0110\\u1ECBa \\u0111i\\u1EC3m:\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 229,\n            columnNumber: 15\n          }, this), \" \", race.circuit ? `${race.circuit.name}, ${race.circuit.country}` : 'N/A']\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 225,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 223,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 222,\n      columnNumber: 9\n    }, this), results.length > 0 ? /*#__PURE__*/_jsxDEV(Form, {\n      onSubmit: handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(RaceResultsForm, {\n        results: results,\n        onResultChange: handleResultChange,\n        totalLaps: (race === null || race === void 0 ? void 0 : race.laps) || 0\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 237,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"primary\",\n        type: \"submit\",\n        className: \"f1-primary-btn mt-3\",\n        disabled: loading,\n        children: loading ? 'Đang lưu...' : 'Lưu kết quả'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 243,\n        columnNumber: 11\n      }, this), ' ', /*#__PURE__*/_jsxDEV(Button, {\n        variant: \"secondary\",\n        onClick: () => navigate('/race-results'),\n        className: \"mt-3\",\n        children: \"H\\u1EE7y\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 251,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 236,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Alert, {\n      variant: \"info\",\n      children: \"Kh\\xF4ng c\\xF3 k\\u1EBFt qu\\u1EA3 \\u0111ua n\\xE0o cho ch\\u1EB7ng \\u0111ua n\\xE0y. Vui l\\xF2ng ki\\u1EC3m tra l\\u1EA1i ho\\u1EB7c th\\xEAm m\\u1EDBi k\\u1EBFt qu\\u1EA3.\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 260,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 197,\n    columnNumber: 5\n  }, this);\n};\n_s(UpdateRaceResultsPage, \"mfF0pjwPgGZsvXsS6/EORe4jJVA=\", false, function () {\n  return [useParams, useLocation, useNavigate];\n});\n_c = UpdateRaceResultsPage;\nexport default UpdateRaceResultsPage;\nvar _c;\n$RefreshReg$(_c, \"UpdateRaceResultsPage\");","map":{"version":3,"names":["React","useState","useEffect","Container","Form","Button","Alert","Spinner","Card","Modal","useParams","useLocation","useNavigate","getRaceById","getRaceResultsByRaceStageId","updateRaceResults","RaceResultsForm","v4","uuidv4","jsxDEV","_jsxDEV","UpdateRaceResultsPage","_s","_location$state","id","location","navigate","seasonId","state","race","setRace","loading","setLoading","error","setError","saveSuccess","setSaveSuccess","results","setResults","fetchData","raceData","existingResults","length","formattedResults","map","result","_result$raceStage","_result$driverTeamAss","_result$driverTeamAss2","_result$driverTeamAss3","_result$driverTeamAss4","_result$driverTeamAss5","_result$driverTeamAss6","_result$driverTeamAss7","_result$driverTeamAss8","_result$season","raceStageId","raceStage","driverId","driverTeamAssignment","driver","teamId","team","driverName","fullName","teamName","name","season","gridPosition","finishPosition","points","status","finishTimeOrGap","lapsCompleted","resultError","console","log","err","handleResultChange","field","value","prevResults","updatedResults","finishedCount","filter","r","handleSubmit","e","preventDefault","isValidTimeFormat","timeString","timePattern","test","finishedDriversWithIssues","trim","driversWithInvalidLaps","parseInt","totalLaps","laps","processedResults","handleConfirm","className","children","animation","role","fileName","_jsxFileName","lineNumber","columnNumber","variant","onClick","show","onHide","centered","Header","closeButton","Title","Body","style","fontSize","Footer","Text","Date","raceDate","toLocaleDateString","circuit","country","onSubmit","onResultChange","type","disabled","_c","$RefreshReg$"],"sources":["C:/Users/ADMIN/Desktop/KTPM/BTL_KTTKPM_PTIT/f1-management-frontend/src/pages/UpdateRaceResultsPage.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { Container, Form, Button, Alert, Spinner, Card, Modal } from 'react-bootstrap';\r\nimport { useParams, useLocation, useNavigate } from 'react-router-dom';\r\nimport { getRaceById } from '../services/raceService';\r\nimport { getRaceResultsByRaceStageId, updateRaceResults } from '../services/raceResultService';\r\nimport RaceResultsForm from '../components/RaceResults/RaceResultsForm';\r\nimport { v4 as uuidv4 } from 'uuid';\r\n// Trang cập nhật kết quả chặng đua\r\nconst UpdateRaceResultsPage = () => {\r\n  const { id } = useParams();\r\n  const location = useLocation();\r\n  const navigate = useNavigate();\r\n  const seasonId = location.state?.seasonId;\r\n  \r\n  const [race, setRace] = useState(null);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState(null);\r\n  const [saveSuccess, setSaveSuccess] = useState(false);\r\n  const [results, setResults] = useState([]);\r\n\r\n  useEffect(() => {\r\n    if (!seasonId) {\r\n      setError('Không tìm thấy thông tin mùa giải. Vui lòng quay lại trang trước.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    const fetchData = async () => {\r\n      try {\r\n        // Lấy thông tin chặng đua\r\n        const raceData = await getRaceById(id);\r\n        setRace(raceData);\r\n        \r\n        // Lấy kết quả đua nếu có\r\n        try {\r\n          const existingResults = await getRaceResultsByRaceStageId(id);\r\n          if (existingResults && existingResults.length > 0) {\r\n            // Chuyển đổi định dạng mới về định dạng cũ để tương thích với UI\r\n            const formattedResults = existingResults.map(result => ({\r\n              id: result.id,\r\n              raceStageId: result.raceStage?.id || id,\r\n              driverId: result.driverTeamAssignment?.driver?.id,\r\n              teamId: result.driverTeamAssignment?.team?.id,\r\n              driverName: result.driverTeamAssignment?.driver?.fullName,\r\n              teamName: result.driverTeamAssignment?.team?.name,\r\n              seasonId: result.season?.id || seasonId,\r\n              gridPosition: result.gridPosition,\r\n              finishPosition: result.finishPosition,\r\n              points: result.points,\r\n              status: result.status,\r\n              finishTimeOrGap: result.finishTimeOrGap,\r\n              lapsCompleted: result.lapsCompleted\r\n            }));\r\n            \r\n            setResults(formattedResults);\r\n          } else {\r\n            // Khởi tạo mảng rỗng nếu không có kết quả\r\n            setError('Không có kết quả đua cho chặng này. Vui lòng thêm kết quả đua trước.');\r\n          }\r\n        } catch (resultError) {\r\n          console.log('Không tìm thấy kết quả:', resultError);\r\n          setError('Không có kết quả đua cho chặng này. Vui lòng thêm kết quả đua trước.');\r\n        }\r\n      } catch (err) {\r\n        setError('Không thể tải thông tin chặng đua. Vui lòng thử lại sau.');\r\n        console.error('Error fetching data:', err);\r\n      } finally {\r\n        setLoading(false);\r\n      }\r\n    };\r\n\r\n    fetchData();\r\n  }, [id, seasonId]);\r\n\r\n  const handleResultChange = (driverId, field, value) => {\r\n    setResults(prevResults => {\r\n      const updatedResults = prevResults.map(result => \r\n        result.driverId === driverId \r\n          ? { ...result, [field]: value } \r\n          : result\r\n      );\r\n      \r\n      // Nếu đang thay đổi trạng thái thành FINISHED, tự động đặt vị trí về đích\r\n      if (field === 'status' && value === 'FINISHED') {\r\n        // Đếm số tay đua đã hoàn thành\r\n        const finishedCount = updatedResults.filter(r => r.status === 'FINISHED').length;\r\n        \r\n        // Cập nhật vị trí về đích cho tay đua vừa hoàn thành\r\n        return updatedResults.map(result => \r\n          result.driverId === driverId \r\n            ? { ...result, finishPosition: finishedCount } \r\n            : result\r\n        );\r\n      }\r\n      \r\n      return updatedResults;\r\n    });\r\n  };\r\n\r\n  const handleSubmit = async (e) => {\r\n    e.preventDefault();\r\n    setLoading(true);\r\n    setError(null);\r\n    setSaveSuccess(false);\r\n\r\n    // Kiểm tra định dạng thời gian\r\n    const isValidTimeFormat = (timeString) => {\r\n      // Kiểm tra định dạng hh:mm:ss hoặc mm:ss\r\n      const timePattern = /^(?:(\\d+):)?(\\d{1,2}):(\\d{1,2})(?:\\.(\\d{1,3}))?$/;\r\n      return timePattern.test(timeString);\r\n    };\r\n\r\n    // Kiểm tra tất cả tay đua FINISHED phải có thời gian hoàn thành và đúng định dạng\r\n    const finishedDriversWithIssues = results.filter(\r\n      result => result.status === 'FINISHED' && (\r\n        !result.finishTimeOrGap || \r\n        result.finishTimeOrGap.trim() === '' || \r\n        !isValidTimeFormat(result.finishTimeOrGap)\r\n      )\r\n    );\r\n\r\n    if (finishedDriversWithIssues.length > 0) {\r\n      setError('Vui lòng nhập thời gian hoàn thành cho tất cả các tay đua có trạng thái \"Hoàn thành\" theo định dạng hh:mm:ss hoặc mm:ss.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    // Kiểm tra số vòng hoàn thành phải hợp lệ\r\n    const driversWithInvalidLaps = results.filter(result => {\r\n      const lapsCompleted = parseInt(result.lapsCompleted, 10);\r\n      const totalLaps = parseInt(race.laps, 10);\r\n      \r\n      if (result.status === 'PENDING') {\r\n        // Tay đua chưa xuất phát phải có số vòng là 0\r\n        return lapsCompleted !== 0;\r\n      } else if (result.status === 'FINISHED') {\r\n        // Tay đua hoàn thành phải chạy đủ số vòng\r\n        return lapsCompleted !== totalLaps;\r\n      } else {\r\n        // Tay đua không hoàn thành không được chạy đủ số vòng\r\n        return lapsCompleted >= totalLaps;\r\n      }\r\n    });\r\n\r\n    if (driversWithInvalidLaps.length > 0) {\r\n      setError('Số vòng hoàn thành không hợp lệ. Tay đua chưa xuất phát phải có số vòng là 0. Tay đua hoàn thành phải chạy đủ số vòng. Tay đua không hoàn thành không được chạy đủ số vòng.');\r\n      setLoading(false);\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Process results before sending to API\r\n      const processedResults = results.map(result => ({\r\n        ...result,\r\n        gridPosition: result.gridPosition ? parseInt(result.gridPosition, 10) : null,\r\n        finishPosition: result.status === 'FINISHED' ? parseInt(result.finishPosition, 10) : null,\r\n        lapsCompleted: parseInt(result.lapsCompleted, 10),\r\n        finishTimeOrGap: result.status === 'FINISHED' ? result.finishTimeOrGap : 'N/A'\r\n      }));\r\n\r\n      await updateRaceResults(id, seasonId, processedResults);\r\n      setSaveSuccess(true);\r\n    } catch (err) {\r\n      setError('Có lỗi xảy ra khi lưu kết quả. Vui lòng thử lại sau.');\r\n      console.error('Error updating race results:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  const handleConfirm = () => {\r\n    navigate('/race-results');\r\n  };\r\n\r\n  if (loading && !race) {\r\n    return (\r\n      <Container className=\"d-flex justify-content-center mt-5\">\r\n        <Spinner animation=\"border\" role=\"status\">\r\n          <span className=\"visually-hidden\">Đang tải...</span>\r\n        </Spinner>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  if (error && !race) {\r\n    return (\r\n      <Container>\r\n        <Alert variant=\"danger\">{error}</Alert>\r\n        <Button variant=\"secondary\" onClick={() => navigate('/race-results')}>\r\n          Quay lại\r\n        </Button>\r\n      </Container>\r\n    );\r\n  }\r\n\r\n  return (\r\n    <Container>\r\n      <h2 className=\"page-title\">Cập nhật kết quả chặng đua</h2>\r\n      \r\n      {/* Modal xác nhận cập nhật thành công */}\r\n      <Modal show={saveSuccess} onHide={handleConfirm} centered>\r\n        <Modal.Header closeButton>\r\n          <Modal.Title>Thông báo</Modal.Title>\r\n        </Modal.Header>\r\n        <Modal.Body>\r\n          <div className=\"text-center\">\r\n            <i className=\"bi bi-check-circle text-success\" style={{ fontSize: '4rem' }}></i>\r\n            <h4 className=\"mt-3\">Thành công!</h4>\r\n            <p>Kết quả chặng đua đã được cập nhật.</p>\r\n          </div>\r\n        </Modal.Body>\r\n        <Modal.Footer>\r\n          <Button variant=\"primary\" onClick={handleConfirm}>\r\n            OK\r\n          </Button>\r\n        </Modal.Footer>\r\n      </Modal>\r\n      \r\n      {error && <Alert variant=\"danger\">{error}</Alert>}\r\n      \r\n      {race && (\r\n        <Card className=\"mb-4\">\r\n          <Card.Body>\r\n            <Card.Title>{race.name}</Card.Title>\r\n            <Card.Text>\r\n              <strong>Mã chặng đua:</strong> {race.id}<br />\r\n              <strong>Số vòng đua:</strong> {race.laps}<br />\r\n              <strong>Thời gian diễn ra:</strong> {new Date(race.raceDate).toLocaleDateString('vi-VN')}<br />\r\n              <strong>Địa điểm:</strong> {race.circuit ? `${race.circuit.name}, ${race.circuit.country}` : 'N/A'}\r\n            </Card.Text>\r\n          </Card.Body>\r\n        </Card>\r\n      )}\r\n      \r\n      {results.length > 0 ? (\r\n        <Form onSubmit={handleSubmit}>\r\n          <RaceResultsForm \r\n            results={results} \r\n            onResultChange={handleResultChange}\r\n            totalLaps={race?.laps || 0}\r\n          />\r\n          \r\n          <Button \r\n            variant=\"primary\" \r\n            type=\"submit\" \r\n            className=\"f1-primary-btn mt-3\"\r\n            disabled={loading}\r\n          >\r\n            {loading ? 'Đang lưu...' : 'Lưu kết quả'}\r\n          </Button>{' '}\r\n          <Button \r\n            variant=\"secondary\" \r\n            onClick={() => navigate('/race-results')}\r\n            className=\"mt-3\"\r\n          >\r\n            Hủy\r\n          </Button>\r\n        </Form>\r\n      ) : (\r\n        <Alert variant=\"info\">\r\n          Không có kết quả đua nào cho chặng đua này. Vui lòng kiểm tra lại hoặc thêm mới kết quả.\r\n        </Alert>\r\n      )}\r\n    </Container>\r\n  );\r\n};\r\n\r\nexport default UpdateRaceResultsPage; "],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}